<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Salle 1 ‚Äî Trouve l‚Äôarnaque</title>

    <!-- Police arcade / pixel -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

    <!-- CSS de la salle -->
    <link rel="stylesheet" href="salle1-obsolescence.css">
</head>
<body>
<div class="game-wrapper">
    <header class="game-header">
        <h1 class="game-title">Salle 1 ‚Äî Obsolescence programm√©e</h1>
        <p class="game-subtitle">
            Mini-jeu : <span class="highlight">‚ÄúTrouve l‚Äôarnaque‚Äù</span> üí£<br>
            Pour chaque produit, clique sur l‚Äô√©l√©ment qui provoque l‚Äôobsolescence.
        </p>
    </header>

    <main class="game-board">
        <!-- Carte produit : Smartphone -->
        <section class="product-card" data-product="phone">
            <div class="product-header">
                <div class="product-image product-image-phone" aria-hidden="true"></div>
                <h2 class="product-title">Smartphone</h2>
            </div>
            <p class="product-hint">
                Quel est l‚Äô√©l√©ment qui te pousse √† jeter le t√©l√©phone plus t√¥t que pr√©vu ?
            </p>
            <div class="options">
                <button class="option" data-correct="false">
                    Coque brillante
                </button>
                <button class="option" data-correct="true">
                    Batterie coll√©e
                </button>
                <button class="option" data-correct="false">
                    Fond d‚Äô√©cran anim√©
                </button>
            </div>
            <p class="feedback"></p>
        </section>

        <!-- Carte produit : Imprimante -->
        <section class="product-card" data-product="printer">
            <div class="product-header">
                <div class="product-image product-image-printer" aria-hidden="true"></div>
                <h2 class="product-title">Imprimante</h2>
            </div>
            <p class="product-hint">
                O√π se cache l‚Äôarnaque qui bloque l‚Äôimprimante alors qu‚Äôelle peut encore fonctionner ?
            </p>
            <div class="options">
                <button class="option" data-correct="false">
                    C√¢ble USB
                </button>
                <button class="option" data-correct="true">
                    Compteur de pages
                </button>
                <button class="option" data-correct="false">
                    Bouton ON/OFF
                </button>
            </div>
            <p class="feedback"></p>
        </section>

        <!-- Carte produit : PC -->
        <section class="product-card" data-product="pc">
            <div class="product-header">
                <div class="product-image product-image-pc" aria-hidden="true"></div>
                <h2 class="product-title">Ordinateur</h2>
            </div>
            <p class="product-hint">
                Quel √©l√©ment rend ton PC lent et presque inutilisable alors qu‚Äôil pourrait encore servir ?
            </p>
            <div class="options">
                <button class="option" data-correct="false">
                    Fonds d‚Äô√©cran de ton chat
                </button>
                <button class="option" data-correct="true">
                    Mises √† jour forc√©es
                </button>
                <button class="option" data-correct="false">
                    Port USB en fa√ßade
                </button>
            </div>
            <p class="feedback"></p>
        </section>
    </main>

    <footer class="game-footer">
    <p id="global-message" class="global-message">
        D√©masque les 3 arnaques pour gagner la salle, petit manchot du NIRD üêß.
    </p>

    <div class="footer-buttons">
        <a href="map.html" class="btn-nav btn-retour">‚Üê Retour</a>
        <a href="map.html" class="btn-nav btn-termine" id="btn-termine">Termin√© ‚úî</a>
    </div>
</footer>

</div>

<!-- Script du mini-jeu -->
<script>
    (function () {
        const cards = document.querySelectorAll('.product-card');
        const globalMessage = document.getElementById('global-message');

        function checkAllSolved() {
            const solvedCount = document.querySelectorAll('.product-card.solved').length;
            if (solvedCount === cards.length) {
                globalMessage.textContent =
                    "Bien jou√© ! Tu as d√©masqu√© toutes les arnaques de l‚Äôobsolescence programm√©e üí•üåç";
                globalMessage.classList.add('global-message-success');

        // ‚ûú Affichage du bouton Termin√©
            document.getElementById("btn-termine").classList.add("show");
    }
}


        cards.forEach(card => {
            const options = card.querySelectorAll('.option');
            const feedback = card.querySelector('.feedback');

            options.forEach(option => {
                option.addEventListener('click', () => {
                    if (card.classList.contains('solved')) return;

                    const isCorrect = option.dataset.correct === 'true';

                    // Reset √©tat visuel des options
                    options.forEach(o => o.classList.remove('option-correct', 'option-wrong'));

                    if (isCorrect) {
                        option.classList.add('option-correct');
                        feedback.textContent = "Bien jou√© ! Tu as trouv√© l‚Äôarnaque üëÄ";
                        card.classList.add('solved');
                        card.classList.add('card-pulse');
                        setTimeout(() => card.classList.remove('card-pulse'), 600);
                        checkAllSolved();
                    } else {
                        option.classList.add('option-wrong');
                        feedback.textContent = "Essaie encore, l‚Äôarnaque est ailleurs‚Ä¶";
                    }
                });
            });
        });
    })();
</script>
</body>
</html>
