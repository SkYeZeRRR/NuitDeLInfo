<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <title>Salle 2 ‚Äî Choisis ton OS id√©al</title>

    <!-- Police arcade / pixel -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

    <!-- Feuille de style -->
    <link rel="stylesheet" href="../css/salle2.css">
</head>
<body>
<div class="game-wrapper">
    <div class="header">
        <h1>Salle 2 ‚Äî Passer de Windows √† Linux</h1>
        <h2>Mini-jeu : ‚ÄúChoisis ton OS id√©al‚Äù üß™</h2>
        <p>Glisse chaque caract√©ristique dans le bon OS : Windows, macOS ou Linux.</p>
    </div>

    <div class="layout">
        <!-- OS Cards -->
        <div class="os-cards">
            <!-- Windows -->
            <div class="os-card">
                <div class="os-tag">Windows</div>
                <h3>Windows</h3>
                <ul>
                    <li>Tr√®s r√©pandu sur les PC</li>
                    <li>Beaucoup de logiciels propri√©taires</li>
                    <li>Tr√®s utilis√© pour les jeux vid√©o</li>
                </ul>
                <div id="windows-drop"
                     class="drop-zone empty"
                     data-os="windows"
                     data-label="Caract√©ristiques de Windows ici">
                </div>
            </div>

            <!-- macOS -->
            <div class="os-card">
                <div class="os-tag">macOS</div>
                <h3>macOS</h3>
                <ul>
                    <li>Uniquement sur les Mac</li>
                    <li>√âcosyst√®me Apple tr√®s int√©gr√©</li>
                    <li>Mat√©riel premium et co√ªteux</li>
                </ul>
                <div id="mac-drop"
                     class="drop-zone empty"
                     data-os="mac"
                     data-label="Caract√©ristiques de macOS ici">
                </div>
            </div>

            <!-- Linux -->
            <div class="os-card linux">
                <span class="linux-badge">Objectif sobri√©t√© üéØ</span>
                <div class="os-tag">Linux</div>
                <h3>Linux</h3>
                <ul>
                    <li>Id√©al pour la sobri√©t√© num√©rique</li>
                </ul>
                <div id="linux-drop"
                     class="drop-zone empty"
                     data-os="linux"
                     data-label="Caract√©ristiques de Linux ici">
                </div>
            </div>
        </div>

        <!-- Tokens -->
        <aside class="side-panel">
            <h4>Caract√©ristiques √† placer üß©</h4>
            <p style="font-size:0.6rem; line-height:1.4;">
                Glisse chaque jeton dans l‚ÄôOS qui lui correspond.  
                Tu peux corriger autant que tu veux avant de cliquer sur <strong>V√©rifier</strong>.
            </p>
            <div id="token-pool" class="token-pool">
                <!-- Linux -->
                <div class="token" draggable="true" data-target="linux">
                    Gratuit ou tr√®s faible co√ªt de licence
                </div>
                <div class="token" draggable="true" data-target="linux">
                    Logiciel libre & code source ouvert
                </div>
                <div class="token" draggable="true" data-target="linux">
                    Fonctionne bien sur du vieux mat√©riel
                </div>
                <div class="token" draggable="true" data-target="linux">
                    Tr√®s personnalisable selon les besoins
                </div>
                <div class="token" draggable="true" data-target="linux">
                    Respect fort de la vie priv√©e
                </div>

                <!-- Windows -->
                <div class="token" draggable="true" data-target="windows">
                    Licence propri√©taire payante
                </div>
                <div class="token" draggable="true" data-target="windows">
                    Tr√®s utilis√© pour les jeux vid√©o commerciaux
                </div>
                <div class="token" draggable="true" data-target="windows">
                    Souvent pr√©sent par d√©faut sur les PC achet√©s
                </div>
                <div class="token" draggable="true" data-target="windows">
                    Mises √† jour parfois impos√©es et lourdes
                </div>

                <!-- macOS -->
                <div class="token" draggable="true" data-target="mac">
                    R√©serv√© au mat√©riel Apple
                </div>
                <div class="token" draggable="true" data-target="mac">
                    √âcosyst√®me tr√®s int√©gr√© mat√©riel + logiciel
                </div>
                <div class="token" draggable="true" data-target="mac">
                    Image premium et orient√©e cr√©atifs
                </div>
                <div class="token" draggable="true" data-target="mac">
                    Mat√©riel souvent plus cher que la moyenne
                </div>
            </div>
        </aside>
    </div>

    <div class="controls">
        <button id="check-btn" class="btn-primary">‚úî V√©rifier</button>
        <button id="reset-btn" class="btn-secondary">üîÅ Reset</button>
        <div id="feedback" class="feedback">
            Place les caract√©ristiques puis clique sur ‚ÄúV√©rifier‚Äù.
        </div>
    </div>
</div>

<script>
    const tokens = document.querySelectorAll('.token');
    const dropZones = document.querySelectorAll('.drop-zone');
    const tokenPool = document.getElementById('token-pool');
    const checkBtn = document.getElementById('check-btn');
    const resetBtn = document.getElementById('reset-btn');
    const feedback = document.getElementById('feedback');

    let draggedToken = null;

    // Drag & drop de base
    tokens.forEach(token => {
        token.addEventListener('dragstart', () => {
            draggedToken = token;
        });
        token.addEventListener('dragend', () => {
            draggedToken = null;
        });
    });

    function makeDroppable(area) {
        area.addEventListener('dragover', (e) => {
            e.preventDefault();
        });

        area.addEventListener('drop', () => {
            if (!draggedToken) return;
            area.appendChild(draggedToken);
            updateEmptyStates();
            clearHighlights();
        });
    }

    dropZones.forEach(zone => makeDroppable(zone));
    makeDroppable(tokenPool);

    function updateEmptyStates() {
        dropZones.forEach(zone => {
            const hasToken = zone.querySelector('.token') !== null;
            zone.classList.toggle('empty', !hasToken);
        });
    }

    function clearHighlights() {
        tokens.forEach(t => {
            t.classList.remove('correct-highlight', 'wrong-highlight');
        });
        dropZones.forEach(z => {
            z.classList.remove('valid', 'invalid');
        });
    }

    // V√©rification globale
    checkBtn.addEventListener('click', () => {
        clearHighlights();

        let correct = 0;
        let wrong = 0;
        const total = tokens.length;

        tokens.forEach(token => {
            const target = token.dataset.target;
            const parent = token.parentElement;

            if (parent.classList.contains('drop-zone')) {
                const zoneOs = parent.dataset.os;
                if (zoneOs === target) {
                    correct++;
                    token.classList.add('correct-highlight');
                } else {
                    wrong++;
                    token.classList.add('wrong-highlight');
                }
            }
        });

        const placed = correct + wrong;
        const unplaced = total - placed;

        if (correct === total && wrong === 0) {
            feedback.textContent =
                "Parfait ! Tu as plac√© toutes les caract√©ristiques dans le bon OS. üêßüéâ";
            feedback.className = "feedback success";
            dropZones.forEach(z => z.classList.add('valid'));
        } else {
            feedback.textContent =
                `R√©sultat : ${correct}/${total} bien plac√©es, ` +
                `${wrong} au mauvais endroit, ${unplaced} encore dans la zone de d√©part.`;
            feedback.className = "feedback error";
            if (wrong > 0) {
                dropZones.forEach(z => z.classList.add('invalid'));
            }
        }
    });

    // Reset
    resetBtn.addEventListener('click', () => {
        tokens.forEach(token => tokenPool.appendChild(token));
        updateEmptyStates();
        clearHighlights();
        feedback.textContent = "Place les caract√©ristiques puis clique sur ‚ÄúV√©rifier‚Äù.";
        feedback.className = "feedback";
    });

    updateEmptyStates();
</script>

</body>
</html>
